<?
$s = "[{\"index\":\" Австралия\", \"value\":\" английский\"},{\"index\":\" Австрия\", \"value\":\" немецкий\"},{\"index\":\" Азербайджан\", \"value\":\" азербайджанский\"},{\"index\":\" Албания\", \"value\":\" албанский\"},{\"index\":\" Алжир\", \"value\":\" арабский\"},{\"index\":\" Ангола\", \"value\":\" португальский\"},{\"index\":\" Андорра\", \"value\":\" каталанский\"},{\"index\":\" Антигуа и Барбуда\", \"value\":\" английский\"},{\"index\":\" Аргентина\", \"value\":\" испанский\"},{\"index\":\" Армения\", \"value\":\" армянский\"},{\"index\":\" Афганистан\", \"value\":\" пушту, дари\"},{\"index\":\" Багамы\", \"value\":\" английский\"},{\"index\":\" Бангладеш\", \"value\":\" бенгальский, английский\"},{\"index\":\" Барбадос\", \"value\":\" английский\"},{\"index\":\" Бахрейн\", \"value\":\" арабский\"},{\"index\":\" Беларусь\", \"value\":\" белорусский, русский\"},{\"index\":\" Белиз\", \"value\":\" английский\"},{\"index\":\" Бельгия\", \"value\":\" немецкий, французский, нидерландский\"},{\"index\":\" Бенин\", \"value\":\" французский\"},{\"index\":\" Болгария\", \"value\":\" болгарский\"},{\"index\":\" Боливия\", \"value\":\" испанский, аймара, кечуа\"},{\"index\":\" Босния и Герцеговина\", \"value\":\" сербский, хорватский, боснийский\"},{\"index\":\" Ботсвана\", \"value\":\" сетсвана, английский\"},{\"index\":\" Бразилия\", \"value\":\" португальский\"},{\"index\":\" Бруней\", \"value\":\" малайский\"},{\"index\":\" Буркина Фасо\", \"value\":\" французский\"},{\"index\":\" Бурунди\", \"value\":\" кирунди, французский\"},{\"index\":\" Бутан\", \"value\":\" дзонг-кэ (бхотия)\"},{\"index\":\" Вануату\", \"value\":\" французский, бислама, английский\"},{\"index\":\" Ватикан\", \"value\":\" латинский, итальянский\"},{\"index\":\" Великобритания\", \"value\":\" английский\"},{\"index\":\" Венгрия\", \"value\":\" венгерский\"},{\"index\":\" Венесуэла\", \"value\":\" испанский\"},{\"index\":\" Восточный Тимор\", \"value\":\" португальский, тетун\"},{\"index\":\" Вьетнам\", \"value\":\" вьетнамский\"},{\"index\":\" Габон\", \"value\":\" французский\"},{\"index\":\" Гаити\", \"value\":\" французский\"},{\"index\":\" Гайана\", \"value\":\" английский\"},{\"index\":\" Гамбия\", \"value\":\" английский\"},{\"index\":\" Гана\", \"value\":\" английский\"},{\"index\":\" Гватемала\", \"value\":\" испанский\"},{\"index\":\" Гвинея\", \"value\":\" французский\"},{\"index\":\" Гвинея-Бисау\", \"value\":\" португальский\"},{\"index\":\" Германия\", \"value\":\" немецкий\"},{\"index\":\" Гондурас\", \"value\":\" испанский\"},{\"index\":\" Гренада\", \"value\":\" английский\"},{\"index\":\" Греция\", \"value\":\" греческий\"},{\"index\":\" Грузия\", \"value\":\" грузинский\"},{\"index\":\" Дания\", \"value\":\" датский\"},{\"index\":\" Джибути\", \"value\":\" арабский, французский\"},{\"index\":\" Доминика\", \"value\":\" английский\"},{\"index\":\" Доминиканская Республика\", \"value\":\" испанский\"},{\"index\":\" Египет\", \"value\":\" арабский\"},{\"index\":\" Замбия\", \"value\":\" английский\"},{\"index\":\" Зимбабве\", \"value\":\" английский\"},{\"index\":\" Израиль\", \"value\":\" иврит, арабский\"},{\"index\":\" Индия\", \"value\":\" хинди, английский\"},{\"index\":\" Индонезия\", \"value\":\" индонезийский\"},{\"index\":\" Иордания\", \"value\":\" арабский\"},{\"index\":\" Ирак\", \"value\":\" арабский, курдский\"},{\"index\":\" Иран\", \"value\":\" персидский\"},{\"index\":\" Ирландия\", \"value\":\" ирландский, английский\"},{\"index\":\" Исландия\", \"value\":\" исландский\"},{\"index\":\" Испания\", \"value\":\" испанский\"},{\"index\":\" Италия\", \"value\":\" итальянский\"},{\"index\":\" Йемен\", \"value\":\" арабский\"},{\"index\":\" Кабо-Верде\", \"value\":\" португальский\"},{\"index\":\" Казахстан\", \"value\":\" казахский, русский\"},{\"index\":\" Камбоджа\", \"value\":\" кхмерский\"},{\"index\":\" Камерун\", \"value\":\" французский, английский\"},{\"index\":\" Канада\", \"value\":\" английский, французский\"},{\"index\":\" Катар\", \"value\":\" арабский\"},{\"index\":\" Кения\", \"value\":\" суахили, английский\"},{\"index\":\" Кипр\", \"value\":\" турецкий, греческий\"},{\"index\":\" Киргизия\", \"value\":\" киргизский, русский\"},{\"index\":\" Кирибати\", \"value\":\" английский\"},{\"index\":\" Китай\", \"value\":\" китайский\"},{\"index\":\" Колумбия\", \"value\":\" испанский\"},{\"index\":\" Коморы\", \"value\":\" арабский, французский\"},{\"index\":\" Конго, демократическая республика\", \"value\":\" французский\"},{\"index\":\" Конго, республика \", \"value\":\" французский\"},{\"index\":\" Коста-Рика\", \"value\":\" испанский\"},{\"index\":\" Кот-д’Ивуар\", \"value\":\" французский\"},{\"index\":\" Куба\", \"value\":\" испанский\"},{\"index\":\" Кувейт\", \"value\":\" арабский\"},{\"index\":\" Лаос\", \"value\":\" лаосский\"},{\"index\":\" Латвия\", \"value\":\" латышский\"},{\"index\":\" Лесото\", \"value\":\" английский, сесото\"},{\"index\":\" Либерия\", \"value\":\" английский\"},{\"index\":\" Ливан\", \"value\":\" арабский\"},{\"index\":\" Ливия\", \"value\":\" арабский\"},{\"index\":\" Литва\", \"value\":\" литовский\"},{\"index\":\" Лихтенштейн\", \"value\":\" немецкий\"},{\"index\":\" Люксембург\", \"value\":\" немецкий, французский, люксембургский диалект\"},{\"index\":\" Маврикий\", \"value\":\" английский\"},{\"index\":\" Мавритания\", \"value\":\" арабский\"},{\"index\":\" Мадагаскар\", \"value\":\" малагасийский, французский\"},{\"index\":\" Македония\", \"value\":\" македонский\"},{\"index\":\" Малави\", \"value\":\" чичева, английский\"},{\"index\":\" Малайзия\", \"value\":\" малазийский\"},{\"index\":\" Мали\", \"value\":\" французский\"},{\"index\":\" Мальдивы\", \"value\":\" мальдивский (дивехи)\"},{\"index\":\" Мальта\", \"value\":\" мальтийский, английский\"},{\"index\":\" Марокко\", \"value\":\" арабский\"},{\"index\":\" Маршалловы Острова\", \"value\":\" английский\"},{\"index\":\" Мексика\", \"value\":\" испанский\"},{\"index\":\" Мозамбик\", \"value\":\" португальский\"},{\"index\":\" Молдавия\", \"value\":\" молдавский\"},{\"index\":\" Монако\", \"value\":\" французский\"},{\"index\":\" Монголия\", \"value\":\" монгольский\"},{\"index\":\" Мьянма\", \"value\":\" бирманский\"},{\"index\":\" Намибия\", \"value\":\" английский\"},{\"index\":\" Науру\", \"value\":\" науруанский, английский\"},{\"index\":\" Непал\", \"value\":\" непали\"},{\"index\":\" Нигер\", \"value\":\" французский\"},{\"index\":\" Нигерия\", \"value\":\" английский\"},{\"index\":\" Нидерланды\", \"value\":\" нидерландский\"},{\"index\":\" Никарагуа\", \"value\":\" испанский\"},{\"index\":\" Новая Зеландия\", \"value\":\" английский\"},{\"index\":\" Норвегия\", \"value\":\" норвежский\"},{\"index\":\" Объединенные Арабские Эмираты\", \"value\":\" арабский\"},{\"index\":\" Оман\", \"value\":\" арабский\"},{\"index\":\" Пакистан\", \"value\":\" урду, английский\"},{\"index\":\" Палау\", \"value\":\" английский\"},{\"index\":\" Панама\", \"value\":\" испанский\"},{\"index\":\" Папуа - Новая Гвинея\", \"value\":\" английский\"},{\"index\":\" Парагвай\", \"value\":\" испанский, гуарани\"},{\"index\":\" Перу\", \"value\":\" испанский, аймара, кечуа\"},{\"index\":\" Польша\", \"value\":\" польский\"},{\"index\":\" Португалия\", \"value\":\" португальский\"},{\"index\":\" Россия\", \"value\":\" русский\"},{\"index\":\" Руанда\", \"value\":\" киньяруанда, английский, французский\"},{\"index\":\" Румыния\", \"value\":\" румынский\"},{\"index\":\" Сальвадор\", \"value\":\" испанский\"},{\"index\":\" Самоа\", \"value\":\" самоанский, английский\"},{\"index\":\" Сан-Марино\", \"value\":\" итальянский\"},{\"index\":\" Сан-Томе и Принсипи\", \"value\":\" португальский\"},{\"index\":\" Саудовская Аравия\", \"value\":\" арабский\"},{\"index\":\" Свазиленд\", \"value\":\" английский, свази\"},{\"index\":\" Северная Корея\", \"value\":\" корейский\"},{\"index\":\" Сейшелы\", \"value\":\" английский, креольский, французский\"},{\"index\":\" Сенегал\", \"value\":\" французский\"},{\"index\":\" Сент-Винсент и Гренадины\", \"value\":\" английский\"},{\"index\":\" Сент-Китс и Невис\", \"value\":\" английский\"},{\"index\":\" Сент-Люсия\", \"value\":\" английский\"},{\"index\":\" Сербия\", \"value\":\" сербский\"},{\"index\":\" Сингапур\", \"value\":\" китайский, тамильский, малайский, английский\"},{\"index\":\" Сирия\", \"value\":\" арабский\"},{\"index\":\" Словакия\", \"value\":\" словацкий\"},{\"index\":\" Словения\", \"value\":\" словенский\"},{\"index\":\" Соединенные Штаты Америки\", \"value\":\" английский\"},{\"index\":\" Соломоновы Острова\", \"value\":\" английский\"},{\"index\":\" Сомали\", \"value\":\" сомалийский, арабский\"},{\"index\":\" Судан\", \"value\":\" арабский\"},{\"index\":\" Суринам\", \"value\":\" нидерландский\"},{\"index\":\" Сьерра-Леоне\", \"value\":\" английский\"},{\"index\":\" Таджикистан\", \"value\":\" таджикский\"},{\"index\":\" Таиланд\", \"value\":\" тайский\"},{\"index\":\" Танзания\", \"value\":\" суахили, английский\"},{\"index\":\" Того\", \"value\":\" французский\"},{\"index\":\" Тонга\", \"value\":\" тонганский, английский\"},{\"index\":\" Тринидад и Тобаго\", \"value\":\" английский\"},{\"index\":\" Тувалу\", \"value\":\" английский\"},{\"index\":\" Тунис\", \"value\":\" арабский\"},{\"index\":\" Туркмения\", \"value\":\" туркменский\"},{\"index\":\" Турция\", \"value\":\" турецкий\"},{\"index\":\" Уганда\", \"value\":\" английский\"},{\"index\":\" Узбекистан\", \"value\":\" узбекский\"},{\"index\":\" Украина\", \"value\":\" украинский\"},{\"index\":\" Уругвай\", \"value\":\" испанский\"},{\"index\":\" Федеративные штаты Микронезии\", \"value\":\" английский\"},{\"index\":\" Фиджи\", \"value\":\" английский\"},{\"index\":\" Филиппины\", \"value\":\" английский, тагальский\"},{\"index\":\" Финляндия\", \"value\":\" шведский, финский\"},{\"index\":\" Франция\", \"value\":\" французский\"},{\"index\":\" Хорватия\", \"value\":\" хорватский\"},{\"index\":\" Центрально-Африканская Республика\", \"value\":\" французский\"},{\"index\":\" Чад\", \"value\":\" арабский, французский\"},{\"index\":\" Черногория\", \"value\":\" албанский, сербский\"},{\"index\":\" Чехия\", \"value\":\" чешский\"},{\"index\":\" Чили\", \"value\":\" испанский\"},{\"index\":\" Швейцария\", \"value\":\" немецкий, французский, итальянский, ретороманский\"},{\"index\":\" Швеция\", \"value\":\" шведский\"},{\"index\":\" Шри-Ланка\", \"value\":\" сингальский, тамильский\"},{\"index\":\" Эквадор\", \"value\":\" испанский\"},{\"index\":\" Экваториальная Гвинея\", \"value\":\" испанский, французский\"},{\"index\":\" Эритрея\", \"value\":\" тигринья, арабский\"},{\"index\":\" Эстония\", \"value\":\" эстонский\"},{\"index\":\" Эфиопия\", \"value\":\" амхарский\"},{\"index\":\" Южная Корея\", \"value\":\" корейский\"},{\"index\":\" Южно-Африканская Республика\", \"value\":\" английский, африкаанс\"},{\"index\":\" Ямайка\", \"value\":\" английский\"},{\"index\":\" Япония\", \"value\":\" японский\"}]";
$s = json_decode($s);
foreach ($s as $k => $v) {
    $v->value = str_replace(",", "", $v->value);
    $v->value = preg_split("/\s+/", $v->value);
    $s[$k]->value = $v->value[1];
}

$mysqli = mysqli_connect("localhost", "root", "", "web");
if (mysqli_connect_errno()) {
    printf("Соединение не установлено: %s\n", mysqli_connect_error());
    exit();
}


$queryCountry = "INSERT INTO `countries`(`name`, `language_id`) VALUES ";
foreach ($s as $v) {
    $query = "SELECT `id` FROM `languages` WHERE `name` = '$v->value';";
    $res = $mysqli->query($query);
    $id = $res->fetch_object()->id;
    $queryCountry .= "('$v->index', '$id'), ";
}
$queryCountry = mb_strcut($queryCountry, 0, count($queryCountry) - 3);
$queryCountry .= ";";
$res = $mysqli->query($queryCountry);
echo $res;
$mysqli->close();
?>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

</body>
</html>